<!-- based on https://socket.io/get-started/chat -->
<!DOCTYPE html>
<html>
  <head>
    <title>TRYBE - WebChat</title>
    <style>
    </style>
  </head>
  <body>
      <h1> WebChat</h1>
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="nickname"/>
      <input id="input"/>
      <button>Send</button>
    </form> 
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
    
      const form = document.getElementById('form');
      const input = document.getElementById('input');
      const nickname = document.getElementById('nickname');
     

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    if (input.value) {
    const data = {nickname: nickname.value, chatMessage:input.value};
    console.log(data);
      socket.emit('message', data);
      input.value = '';
    }
  });
    socket.on('message', (message)=>{
        const ul = document.getElementById('messages');
        console.log(message);
        const { dataAtual, horaAtual, data, nickname} = message;
        const li = document.createElement('li');
        li.textContent = message;
        ul.appendChild(li);
    })

    </script>
  </body>
 
</html>